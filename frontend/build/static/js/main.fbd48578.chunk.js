(this.webpackJsonpgomusic=this.webpackJsonpgomusic||[]).push([[0],{60:function(e,t,s){"use strict";s.r(t);var n=s(2),a=s.n(n),r=s(17),c=s.n(r),i=s(8),o=s(9),l=s(6),d=s(11),h=s(10),j=s(18),b=s(0),u=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this,t=this.props.promo?"text-danger":"text-dark",s=this.props.promo?this.props.promotion:this.props.price;return Object(b.jsx)("div",{className:"col-md-6 col-lg-4 d-flex align-items-stretch",children:Object(b.jsxs)("div",{className:"card mb-3",children:[Object(b.jsx)("img",{className:"card-img-top",src:this.props.img,alt:this.props.imgalt}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h4",{className:"card-title",children:this.props.productname}),"Price: ",Object(b.jsx)("strong",{className:t,children:s}),Object(b.jsx)("p",{className:"card-text",children:this.props.desc}),Object(b.jsx)("a",{className:"btn btn-success text-white",onClick:function(){e.props.showBuyModal(e.props.ID,s)},children:"Buy"})]})]})})}}]),s}(a.a.Component),m=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={cards:[]},n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch(this.props.location).then((function(e){return e.json()})).then((function(t){e.setState({cards:t})}))}},{key:"render",value:function(){var e=this,t=this.state.cards.map((function(t){return Object(b.jsx)(u,Object(j.a)(Object(j.a)({},t),{},{promo:e.props.promo,showBuyModal:e.props.showBuyModal}),t.id)}));return Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"mt-5 row",children:t})})}}]),s}(a.a.Component),O=s(16),p=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"buildLoggedInMenu",value:function(){return Object(b.jsx)("div",{className:"navbar-brand order-1 text-whithe my-auto",children:Object(b.jsxs)("div",{className:"btn-group",children:[Object(b.jsxs)("button",{type:"button",className:"btn btn-success dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true",ariaexpanded:"false",children:["Welcome ",this.props.user.name]}),Object(b.jsx)("div",{className:"dropdown-menu",children:Object(b.jsx)("a",{className:"btn dropdown-item",role:"button",children:"Sign Out"})})]})})}},{key:"render",value:function(){var e=this;return Object(b.jsx)("div",{children:Object(b.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-success fixed-top",children:Object(b.jsxs)("div",{className:"container",children:[this.props.user.loggedin?this.buildLoggedInMenu():Object(b.jsx)("button",{type:"button",className:"navbar-brand order-1 btn btn-success",onClick:function(){e.props.showModalWindow()},children:"Sign in"}),Object(b.jsx)("div",{className:"navbar-collapse",id:"navbarNavAltMarkup",children:Object(b.jsxs)("div",{className:"navbar-nav",children:[Object(b.jsx)(O.b,{className:"nav-item nav-link",to:"/",children:"Home"}),Object(b.jsx)(O.b,{className:"nav-item nav-link",to:"/promos",children:"Promotions"}),this.props.user.loggedin?Object(b.jsx)(O.b,{className:"nav-item nav-link",to:"/myorders",children:"My Orders"}):null,Object(b.jsx)(O.b,{className:"nav-item nav-link",to:"/about",children:"About"})]})})]})})})}}]),s}(a.a.Component),g=s(19),x=s(64),v=s(62),f=s(63),N=s(27),y=s.n(N),w=s(36),S=s(20),k="COMPLETE",C="FAILED",I=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(l.a)(n)),n.state={value:"",status:"INITIAL"},n}return Object(o.a)(s,[{key:"renderCreditCardInformation",value:function(){var e=Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"form-row text-center",children:Object(b.jsx)("button",{type:"button",className:"btn  btn-outline-success text-center mx-auto",children:"Use saved card?"})}),Object(b.jsx)("hr",{})]}),t=Object(b.jsxs)("div",{className:"form-row form-check text-center",children:[Object(b.jsx)("input",{className:"form-check-input",type:"checkbox",value:"",id:"remembercardcheck"}),Object(b.jsx)("label",{className:"form-check-label",htmlFor:"remembercardcheck",children:"Remember Card?"})]});return Object(b.jsxs)("div",{children:[e,Object(b.jsx)("h5",{className:"mb-4",children:"Payment Info"}),Object(b.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(b.jsx)("div",{className:"form-row",children:Object(b.jsxs)("div",{className:"col-lg-12 form-group",children:[Object(b.jsx)("label",{htmlFor:"cc-name",children:"Name On Card:"}),Object(b.jsx)("input",{id:"cc-name",name:"cc-name",className:"form-control",placeholder:"Name on Card",onChange:this.handleInputChange,type:"text"})]})}),Object(b.jsx)("div",{className:"form-row",children:Object(b.jsxs)("div",{className:"col-lg-12 form-group",children:[Object(b.jsx)("label",{htmlFor:"card",children:"Card Information:"}),Object(b.jsx)(S.CardElement,{id:"card",className:"form-control",style:{base:{fontSize:"20px",color:"#495057",fontFamily:'apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif'}}})]})}),t,Object(b.jsx)("hr",{className:"mb-4"}),Object(b.jsx)("button",{type:"submit",className:"btn btn-success btn-large",children:this.props.operation})]})]})}},{key:"renderSuccess",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h5",{className:"mb-4 text-success",children:"Request Successfull...."}),Object(b.jsx)("button",{type:"submit",className:"btn btn-success btn-large","data-dismiss":"modal",children:"Ok"})]})}},{key:"renderFailure",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h5",{className:"mb-4 text-danger",children:" Credit card information invalid, try again or exit"}),this.renderCreditCardInformation()]})}},{key:"handleSubmit",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var s,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s="",this.state.useExisting){e.next=12;break}return e.next=5,this.props.stripe.createToken({name:this.state.name});case 5:if(n=e.sent,null!=(a=n.token)){e.next=11;break}return console.log("invalid token"),this.setState({status:C}),e.abrupt("return");case 11:s=a.id;case 12:return e.next=14,fetch("/users/charge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,customer_id:this.props.user,product_id:this.props.productid,sell_price:this.props.price,rememberCard:void 0!==this.state.remember,useExisting:this.state.useExisting})});case 14:e.sent.ok?(console.log("Purchase Complete!"),this.setState({status:k})):this.setState({status:C});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleInputChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=null;switch(this.state.status){case k:e=this.renderSuccess();break;case C:e=this.renderFailure();break;default:e=this.renderCreditCardInformation()}return Object(b.jsx)("div",{children:e})}}]),s}(a.a.Component);function M(e){if(!e.show)return Object(b.jsx)("div",{});var t=Object(S.injectStripe)(I);return Object(b.jsx)("div",{children:Object(b.jsx)(S.StripeProvider,{apiKey:"pk_test_51JqdjpHqNVgKzGGZFZuBvitqdRPC5iN3nwYvdinqY2n5QcfozKRxCYT3sVQVRh26opBOFXz0IvbahgPC6IL7rqWh00ADHiTRK6",children:Object(b.jsx)(S.Elements,{children:Object(b.jsx)(t,{operation:e.operation})})})})}var F=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(l.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n.state={errormessage:""},n}return Object(o.a)(s,[{key:"handleChange",value:function(e){var t=e.target.name,s=e.target.value;this.setState(Object(g.a)({},t,s))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(JSON.stringify(this.state))}},{key:"render",value:function(){var e=this,t=null;return 0!==this.state.errormessage.length&&(t=Object(b.jsx)("h5",{className:"mb-4 text-danger",children:this.state.errormessage})),Object(b.jsxs)("div",{children:[t,Object(b.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(b.jsx)("h5",{className:"mb-4",children:"Basic Info"}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(b.jsx)("input",{name:"email",type:"email",className:"form-control",id:"email",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"pass",children:"Password:"}),Object(b.jsx)("input",{name:"password",type:"password",className:"form-control",id:"pass",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"form-row text-center",children:[Object(b.jsx)("div",{className:"col-12 mt-2",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-success btn-large",children:"Sign In"})}),Object(b.jsx)("div",{className:"col-12 mt-2",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-link text-info",onClick:function(){return e.props.handleNewUser()},children:" New User? Register"})})]})]})]})}}]),s}(a.a.Component),B=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n.state={errormessage:""},n.handleChange=n.handleChange.bind(Object(l.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(l.a)(n)),n}return Object(o.a)(s,[{key:"handleChange",value:function(e){e.preventDefault();var t=e.target.name,s=e.target.value;this.setState(Object(g.a)({},t,s))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(this.state)}},{key:"render",value:function(){var e=null;return 0!==this.state.errormessage.length&&(e=Object(b.jsx)("h5",{className:"mb-4 text-danger",children:this.state.errormessage})),Object(b.jsxs)("div",{children:[e,Object(b.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(b.jsx)("h5",{className:"mb-4",children:"Registration"}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"username",children:"User Name:"}),Object(b.jsx)("input",{id:"username",name:"username",className:"form-control",placeholder:"Jongmin Han",type:"text",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(b.jsx)("input",{type:"email",name:"email",className:"form-control",id:"email",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"pass",children:"Password:"}),Object(b.jsx)("input",{type:"password",name:"pass1",className:"form-control",id:"pass1",onChange:this.handleChange})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{htmlFor:"pass",children:"Confirm password:"}),Object(b.jsx)("input",{type:"password",name:"pass2",className:"form-control",id:"pass2",onChange:this.handleChange})]}),Object(b.jsx)("div",{className:"form-row text-center",children:Object(b.jsx)("div",{className:"col-12 mt-2",children:Object(b.jsx)("button",{type:"submit",className:"btn btn-success btn-large",children:"Register"})})})]})]})}}]),s}(a.a.Component),W=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={showRegistrationForm:!1},n.handleNewUser=n.handleNewUser.bind(Object(l.a)(n)),n}return Object(o.a)(s,[{key:"handleNewUser",value:function(){this.setState({showRegistrationForm:!0})}},{key:"render",value:function(){var e=Object(b.jsx)(F,{handleNewUser:this.handleNewUser});return!0===this.state.showRegistrationForm&&(e=Object(b.jsx)(B,{})),Object(b.jsx)(x.a,{id:"register",tabIndex:"-1",role:"dialog",isOpen:this.props.showModal,toggle:this.props.toggle,children:Object(b.jsxs)("div",{role:"document",children:[Object(b.jsx)(v.a,{toggle:this.props.toggle,className:"bg-success text-white",children:"Sign in"}),Object(b.jsx)(f.a,{children:e})]})})}}]),s}(a.a.Component);function P(e){return Object(b.jsx)(x.a,{id:"buy",tabIndex:"-1",role:"dialog",isOpen:e.showModal,toggle:e.toggle,children:Object(b.jsxs)("div",{role:"document",children:[Object(b.jsx)(v.a,{toggle:e.toggle,className:"bg-success text-white",children:"Buy Item"}),Object(b.jsx)(f.a,{children:Object(b.jsx)(M,{user:e.user,seperator:!1,show:!0,productid:e.productid,price:e.price,operation:"Charge",toggle:e.toggle})})]})})}function R(e){return Object(b.jsx)("div",{className:"row mt-5",children:Object(b.jsxs)("div",{className:"col-12 order-lg-1",children:[Object(b.jsx)("h3",{className:"mb-4",children:"About the Go Music Store"}),Object(b.jsx)("p",{children:"Go music is a modern online msucial instruments store"}),Object(b.jsx)("p",{children:"Explore how you can combine the power of React and Go, to build a fast and beautiful looking online store."}),Object(b.jsx)("p",{children:"We will cover how to build this website step by step."})]})})}function E(e){return Object(b.jsxs)("div",{className:"col-12",children:[Object(b.jsxs)("div",{className:"card text-center",children:[Object(b.jsx)("div",{className:"card-header",children:Object(b.jsx)("h5",{children:e.productname})}),Object(b.jsx)("div",{className:"card-body",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"mx-auto col-6",children:Object(b.jsx)("img",{src:e.img,alt:e.imgalt,className:"img-thumbnail float-left"})}),Object(b.jsxs)("div",{className:"col-6",children:[Object(b.jsx)("p",{className:"card-text",children:e.desc}),Object(b.jsxs)("div",{className:"mt-4",children:["Price: ",Object(b.jsx)("strong",{children:e.price})]})]})]})}),Object(b.jsxs)("div",{className:"card-footer text-muted",children:["Purchased ",e.days," days ago"]})]}),Object(b.jsx)("div",{className:"mt-3"})]})}var D=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={orders:[]},n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch(this.props.location).then((function(e){return e.json()})).then((function(t){e.setState({orders:t.orders})}))}},{key:"render",value:function(){return Object(b.jsx)("div",{className:"row mt-5",children:this.state.orders.map((function(e){return Object(b.jsx)(E,Object(j.a)({},e))}))})}}]),s}(a.a.Component),U=s(5),T=s(28),L=s.n(T),A=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var n;Object(i.a)(this,s),n=t.call(this,e);var a=L.a.getJSON("user")||{loggedin:!1};return n.state={user:a,showSignInModal:!1,showBuyModal:!1},n.handleSignedIn=n.handleSignedIn.bind(Object(l.a)(n)),n.handleSignedOut=n.handleSignedOut.bind(Object(l.a)(n)),n.showSignInModalWindow=n.showSignInModalWindow.bind(Object(l.a)(n)),n.showBuyModalWindow=n.showBuyModalWindow.bind(Object(l.a)(n)),n.toggleSignInModalWindow=n.toggleSignInModalWindow.bind(Object(l.a)(n)),n.toggleBuyModalWindow=n.toggleBuyModalWindow.bind(Object(l.a)(n)),n}return Object(o.a)(s,[{key:"handleSignedIn",value:function(e){this.setState({user:e})}},{key:"handleSignedOut",value:function(){console.log("Call app signed out...");var e=this.state,t=Object.assign({},e,{user:{loggedin:!1}});this.setState(t),L.a.set("user",{loggedin:!1})}},{key:"showSignInModalWindow",value:function(){var e=this.state,t=Object.assign({},e,{showSignInModal:!0});this.setState(t)}},{key:"showBuyModalWindow",value:function(e,t){var s=this.state,n=Object.assign({},s,{showBuyModal:!0,productid:e,price:t});this.setState(n)}},{key:"toggleSignInModalWindow",value:function(){var e=this.state,t=Object.assign({},e,{showSignInModal:!e.showSignInModal});this.setState(t)}},{key:"toggleBuyModalWindow",value:function(){var e=this.state,t=Object.assign({},e,{showBuyModal:!e.showBuyModal});this.setState(t)}},{key:"render",value:function(){return Object(b.jsx)("div",{children:Object(b.jsx)(O.a,{children:Object(b.jsxs)("div",{children:[Object(b.jsx)(p,{user:this.state.user}),Object(b.jsxs)("div",{className:"container pt-4 mt-4",children:[Object(b.jsx)(U.a,{exact:!0,path:"/",render:function(){return Object(b.jsx)(m,{location:"cards.json"})}}),Object(b.jsx)(U.a,{path:"/promos",render:function(){return Object(b.jsx)(m,{location:"promos.json",promo:!0})}}),this.state.user.loggedin?Object(b.jsx)(U.a,{path:"/myorders",render:function(){return Object(b.jsx)(D,{location:"user.json"})}}):null,Object(b.jsx)(U.a,{path:"/about",component:R})]}),Object(b.jsx)(W,{}),Object(b.jsx)(P,{})]})})})}}]),s}(a.a.Component),J=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,65)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;s(e),n(e),a(e),r(e),c(e)}))};c.a.render(Object(b.jsx)(A,{}),document.getElementById("root")),J()}},[[60,1,2]]]);
//# sourceMappingURL=main.fbd48578.chunk.js.map